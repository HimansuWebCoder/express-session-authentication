<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>login</title>
</head>
<body>
    <input type="text" />
    <button>login</button>
    <button id="fetch-btn">fetch data</button>
    <h1></h1>

   <script>
   	const userInput = document.querySelector("input")
      const loginBtn = document.querySelector("button");
      const fetchBtn = document.querySelector("#fetch-btn");

      loginBtn.addEventListener("click", () => {
         fetch("http://localhost:3000/login", {
            method: "post",
            headers: {"Content-Type": "application/json"},
            body:JSON.stringify({username: userInput.value}),
            credentials: 'include'
         })
         .then(res => res.json())
         .then(result => {
            console.log("login successfully")
         })
      })

      fetchBtn.addEventListener("click", () => {
         fetch("http://localhost:3000/data", {
            method: "get",
            credentials: 'include'
         })
           .then(res => res.json())
           .then(data => {
            const heading = document.querySelector("h1");
            heading.textContent = data[0].username;
            console.log(data);
           })
      })
      

   </script>
</body>
</html>